\input{layout/hp-paper-type}

% N.B. All text and images should be 6mm away from all edges
\newcounter{bookpagecount}
\setcounter{bookpagecount}{\XeTeXpdfpagecount"\bookfile"}
\RequirePackage{calc} % This line must be after the previous to avoid an error
\RequirePackage{xfp} % This line must be after the previous to avoid an error
\newlength{\hppaperwidth} % no. of pages รท 2 (rounded up) ร width per sheet
\setlength{\hppaperwidth}{\bookpaper * \fpeval{ceil(\value{bookpagecount}/2)}}
\newlength{\hpspinewidth} % paper thickness
\setlength{\hpspinewidth}{\hppaperwidth}
\makeatletter
\setbox\z@=\hbox{\XeTeXpdffile"\bookfile"\relax}
\newlength{\hpcoverwidth} % paper width
\setlength{\hpcoverwidth}{\the\wd\z@}
\newlength{\hpcoverheight} % coverheight: paper height
\setlength{\hpcoverheight}{\the\ht\z@}
\makeatother
% flapwidth: 0mm each side
\documentclass[12pt,coverwidth=\the\hpcoverwidth,coverheight=\the\hpcoverheight,spinewidth=\the\hpspinewidth,marklength=0mm,bleedwidth=5mm,flapwidth=0mm]{bookcover}

\input{layout/hp-header}

\usepackage{contour}

\input{layout/hp-title}

\begin{document}
\begin{bookcover}
\bookcovercomponent{color}{bg whole}{black}
\bookcovercomponent{picture}{whole}{\coverfile}

\end{bookcover}
\end{document}
